"use strict";!function(){function e(){gapi.load("client:auth2",main.initClient)}function t(){var e=document.getElementById("gcalendar-id").value,t=document.getElementById("gcalendar-key").value,i=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];gapi.client.init({apiKey:t,clientId:e,discoveryDocs:i,scope:"https://www.googleapis.com/auth/calendar"})}function i(e,t,i,s,a,n){gapi.auth2.getAuthInstance().isSignedIn.get()?main.listUpcomingEvents(e,t,i,s,a,n):gapi.auth2.getAuthInstance().signIn().then(function(){main.listUpcomingEvents(e,t,i,s,a,n)})}function s(e,t,i,s,a,n){var o={summary:e,location:t,description:n,start:{dateTime:i,timeZone:a},end:{dateTime:s,timeZone:a},reminders:{useDefault:!1,overrides:[{method:"email",minutes:1440},{method:"popup",minutes:10}]},colorId:"5"};gapi.client.calendar.events.insert({calendarId:"primary",resource:o}).execute(function(e){swal({title:"Session added to your google calendar!",icon:"success",button:"OK!"})})}var a=function(e,t,i){var s=$("#desc-"+e),a=$("#speaker-"+e);if(null!==t&&""!==t){var n=s.hasClass("in"),o=t,l=$("#v"+e);-1!==t.indexOf("v=")?o=t.split("v=")[1].replace(/[&#].*/,""):-1!==t.indexOf("https://youtu.be/")&&(o=t.split("https://youtu.be/")[1]),n||0!==$('[id="video-'+e+'"]').length?n&&(l.css("display","none"),$("#video-"+e).remove()):(l.css("display","block"),a.prepend('<iframe id = "video-'+e+'" class = "video-iframe col-xs-12 col-sm-12 col-md-12" src="https://www.youtube.com/embed/'+o+'" frameborder="0" allowfullscreen></iframe>'))}if(null!==i&&""!==i){var r=s.hasClass("in");r||0!==$('[id="slide-'+e+'"]').length?r&&$("#slide-"+e).remove():-1!==i.indexOf("pdf")?a.prepend('<iframe id = "slide-'+e+'" class = "iframe col-xs-12 col-sm-12 col-md-12" frameborder="0" src="https://docs.google.com/gview?url='+i+'&embedded=true"></iframe>'):-1===i.indexOf("ppt")&&-1===i.indexOf("pptx")||a.prepend('<iframe id = "slide-'+e+'" class = "iframe col-xs-12 col-sm-12 col-md-12" frameborder="0" src="https://view.officeapps.live.com/op/embed.aspx?src='+i+'"></iframe>')}};$(document).ready(function(){function n(e,t,i){var s=o[e];"list"===t?$(s.dateFilter).each(function(){var e="all"===i||$(this).hasClass(i);$(this).toggleClass("hide",!e)}):"calendar"===t&&$(s.dateFilter).each(function(){var e="all"===i||$(this).hasClass(i);$(this).toggleClass("hide",!e)})}var o={room:{dateFilter:".date-filter",place:".venue-filter",room:".room-filter"},track:{dateFilter:".date-filter",place:".track-filter",room:".room-filter"},schedule:{dateFilter:".day-filter",place:".time-filter",room:".schedule-track"}},l=function(e,t){var i=o[e],s=!1;$(".fossasia-filter").each(function(){$(this).is(":visible")&&0!==$(this).val().length&&(s=!0)});var a=$(i.dateFilter+":visible").length,n=$(".room:visible").length;if(t&&0==n||!t&&0==a){$("#no-results").remove();var l=s?"No matching results found.":"No result found.";$(".date-list").after("<p style = 'padding-left: 15px; margin-top: 15px; font-weight: bold; color: red' id='no-results'>"+l+"</p>")}else $("#no-results").remove()},r=function(e,t,i,s,a,n,l){var r="",d=o[e];$(".fossasia-filter").each(function(){$(this).is(":visible")&&(r=$(this).val())}),$(d.dateFilter).each(function(){var o=!0;$(this).find(d.place).each(function(){var c=!0,p="room"==e&&$(this).find(".text").text();$(this).find(d.room).each(function(){var e=$(this).attr("id");if($(this).find(".tip-description").text().toUpperCase().indexOf(r.toUpperCase())>=0||$(this).find(".session-speakers-list a span").text().toUpperCase().indexOf(r.toUpperCase())>=0||$(this).find(".session-speakers-more").text().toUpperCase().indexOf(r.toUpperCase())>=0||$(this).find(".event").text().toUpperCase().indexOf(r.toUpperCase())>=0||$(this).find(".speaker-name").text().toUpperCase().indexOf(r.toUpperCase())>=0){var o=$(this).find(".title-inline .blacktext").text(),d=p||$(this).find("#location").text();l&&1!=n[e]?$(this).hide():t&&o!=s?$(this).hide():i&&d!=a?$(this).hide():(c=!1,$(this).show())}else $(this).hide()}),1==c?$(this).hide():(o=!1,$(this).show())}),1==o?$(this).hide():$(this).show()})};window.main={trackRoomFilter:r,showNoResult:l,viewsFilter:n,handleClientLoad:e,initClient:t,handleAuthClick:i,listUpcomingEvents:s,loadVideoAndSlides:a}})}();